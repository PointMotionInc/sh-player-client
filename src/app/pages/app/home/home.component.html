
<div class="w-1/2 h-screen position-absolute top-0 end-0">
  <ng-lottie [options]="options">
  </ng-lottie>
</div>
<div class="d-flex container-fluid flex-column h-screen w-screen overflow-hidden position-relative">
  <div class="row overflow-y-scroll" [style.height]="'calc(100% - 60px)'">

    <div class="col-lg-8 col-xl-7 h-full">
      <div class="row h-full">

        <div class="col-lg-12 mx-auto">
          &nbsp;
        </div>
        <div class="col-lg-12 intro mx-auto d-flex justify-content-center flex-column">
          <h2 class="text-primary">Be the best version of yourself.</h2>
          <h1 class="display-6 text-primary ">{{currentDate.day}} of {{currentDate.month}}, {{currentDate.year}}</h1>
        </div>
        <div>&nbsp;</div>
        <div class="col-lg-12 daily-goals mx-auto">
          <div class="daily-goals-progress position-relative w-full rounded-6 px-10 py-4">
            <div class="row">
              <div class="col-5 col-lg-6 text-primary display-6 text-nowrap">Daily Goals</div>
              <div class="col-lg-6 d-flex align-items-center justify-content-center flex-end">
                <div class="monthly-remainder">
                  <p class="text-dark font-bold text-nowrap">{{activitiesCompletedToday}}/{{totalActivities}} activities completed today</p>
                </div>
              </div>
            </div>
            <div class="row daily-session-progress">
              <div class="col-12 d-flex justify-content-between mt-14 px-10 position-relative">
                <div class="daily-progress-bar position-absolute h-1 translate-middle-y top-1/2 start-10 end-12">
                  <div class="current-progress h-full bg-success" [style.width]="dailyCompletionPercent+'%'"></div>
                </div>
                <div
                class="session-index rounded-pill w-12 h-12 d-flex position-relative"
                [ngClass]="{'start': session.status === sessionType.Start,'locked': session.status === sessionType.Locked,'completed': session.status === sessionType.Completed }"
                *ngFor="let session of sessions; let i = index">
                  <p class="m-auto font-bold text-lg">
                    {{ session.status != sessionType.Completed ? i+1 : '' }}
                    <i *ngIf="session.status === sessionType.Completed" class="fa fa-check"></i>
                  </p>
                  <p class="title position-absolute top-16 translate-middle-x start-1/2 text-nowrap font-bold text-md">{{ session.name }}</p>
                </div>
              </div>
              <div class="col-12"></div>
            </div>
          </div>
        </div>

        <div>&nbsp;</div>
        <div class="col-lg-12 monthly-goals mx-auto pb-12">
          <div class="monthly-goals-progress position-relative w-full rounded-6 px-10 py-4">
            <div class="row">
              <div class="col-5 col-lg-6 text-primary display-6 text-nowrap">Monthly Goals</div>
              <div class="col-lg-6 d-flex align-items-center justify-content-center flex-end">
                <div class="monthly-remainder">
                  <p class="text-dark font-bold text-nowrap">{{daysCompletedThisMonth}} days completed this month</p>
                </div>
              </div>
            </div>


            <div class="w-full position-relative mt-1">
              <div
                class="current position-absolute d-flex flex-column justify-content-end align-items-center text-center"
                [style.left]="'calc( '+monthlyCompletionPercent + '% - 4px)'">
                <p class="font-bold text-nowrap">&nbsp;</p>
                <i class="fa fa-caret-down text-lg text-success"></i>
              </div>
              <div
                class="goal position-absolute d-flex flex-column justify-content-end align-items-center text-center text-dark"
                [style.left]="'calc( '+monthlyGoalPercent + '% - 4px)'">
                <p class="font-bold text-nowrap">Goal</p>
                <i class="fa fa-caret-down text-lg text-primary"></i>
              </div>
              <div class="progress h-5 w-full top-12 position-relative"></div>
              <div
                class="position-absolute top-20 text-gray d-flex justify-content-between align-items-center w-full text-xl">
              </div>
              <div
                class="position-relative top-18 text-dark d-flex justify-content-between align-items-center w-full pt-2 font-bold text-lg">
                <p *ngFor="let val of monthRange" class="position-relative">
                  {{val % 5 === 0 ? val : '\''}}
                  <span class="lock position-absolute translate-middle-x start-1/2" *ngIf="rewardsRange.includes(val)">
                    <i class="fa fa-solid" [ngClass]="val > daysCompletedThisMonth ? 'fa-lock' : 'fa-unlock'"></i>
                  </span>
                </p>
              </div>
            </div>
          </div>
          <div class="mt-xxl-4 d-none d-xxl-block">&nbsp;</div>
        </div>
      </div>

    </div>



    <div class="col-lg-4 col-xl-5 h-full">
      <div class="row h-full w-full">
        <div class="col-lg-12">&nbsp;</div>
        <div class="col-lg-12 w-full d-flex align-items-center justify-content-center flex-column">
          <h1 class="display-5 text-primary text-center ">Next Activity:
          </h1>
          <h1 class="display-3 text-primary text-center">{{nextSession.name}}</h1>
          <h1 class="font-light text-primary text-center">Area of Focus: <span class="font-normal">Balance</span></h1>
        </div>
        <div class="col-lg-12 d-flex justify-content-center" *ngFor="let item of sessions; let i = index">
          <div class="home-container"
            [@slideOut]="i === 0 ? {value:'', params:{duration : 200}} : {value:'', params:{duration : 0}}"
            [@slideInOut]="i > 0 ? {value:'', params:{duration : 200}} : {value:'', params:{duration : 0}}"
            *ngIf="currentSession === i">
            <div class="d-flex align-items-center justify-content-center">
              <div class="col-lg-12 text-center text-white">
                <button (click)="startNewSession()"
                  class="start-btn w-64 h-64 rounded-pill text-white text-center display-5">Start</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal reward-modal" id="modal_example" tabindex="-1" aria-labelledby="modal_example" aria-hidden="true" [style.display]="'block'" *ngIf="currentReward !== null">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content reward-card shadow-3 bg-primary">
      <div class="modal-header border-bottom-0 py-0">
        <div class="cursor-pointer text-xl ms-auto mt-2">
          <i (click)="closeRewardCard()" class="fa fa-close text-white"></i>
        </div>
      </div>
      <div class=" modal-body text-center p-1">
        <h2 class="text-white font-bolder">You have unlocked a<br/>reward!</h2>
        <img 
          *ngIf="currentReward!.tier === 'bronze'" 
          src="assets/images/rewards/bronze-tier.png" alt="Bronze Reward"
          class="h-12 my-10">
        <img 
          *ngIf="currentReward!.tier === 'silver'" 
          src="assets/images/rewards/bronze-tier.png" alt="Silver Reward"
          class="h-12 my-10">
        <img 
          *ngIf="currentReward!.tier === 'gold'" 
          src="assets/images/rewards/bronze-tier.png" alt="Gold Reward"
          class="h-12 my-10">
          <h3 class="card-title reward-card-text text-white">{{currentReward!.description}}</h3>
      </div>
      <div class="w-full d-flex flex-column text-lg">
        <a routerLink="/app/rewards" (click)="closeRewardCard()" class="w-3/4 mx-auto text-primary font-bold rounded bg-white text-center position-relative">Access Now
          <span class="position-absolute end-3"><i class="fa fa-arrow-right"></i></span>
        </a>
        <p class="my-5 text-white w-3/4 mx-auto text-center">All Rewards can be accessed under the <span class="font-bold">Rewards</span> tab</p>
      </div>
    </div>
  </div>
</div>
